[gcode_macro LONG_SLEEP]
default_parameter_SLEEP_TIME: 30
default_parameter_SLEEP_DURATION: 30
gcode:
	{% set ITERATIONS = SLEEP_TIME|int / SLEEP_DURATION|int %}
	M118 { ITERATIONS }
	M105
	{% set FINAL_SLEEP = SLEEP_TIME|int - (ITERATIONS|int * SLEEP_DURATION|int) %}
	M118 { FINAL_SLEEP }
	{% for i in range(ITERATIONS|int) %}
		M118 Doing sleep {i}
		G4 P{ SLEEP_DURATION|int * 1000 }
		M105
	{% endfor %}
	M118 Doing sleep {FINAL_SLEEP}
	{% if FINAL_SLEEP|int > 1 %}
		M105
		G4 P{ FINAL_SLEEP|int * 1000 }
		M105
	{% endif %}
